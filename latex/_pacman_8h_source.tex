\doxysection{Pacman.\+h}
\hypertarget{_pacman_8h_source}{}\label{_pacman_8h_source}\mbox{\hyperlink{_pacman_8h}{См. документацию.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}Entity.h"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}np.h"{}}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5}{ePacManState}}\ \{}
\DoxyCodeLine{00019\ \ \ \ \ \mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5a485d9d4f145a5b3d039896128e60ffdf}{e\_Normal}},\ }
\DoxyCodeLine{00020\ \ \ \ \ \mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5a73e0433ad21b32161a6d783cedaf4d41}{e\_PowerUp}}\ }
\DoxyCodeLine{00021\ \};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_pac_man}{PacMan}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_entity}{Entity}}\ \{}
\DoxyCodeLine{00030\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00036\ \ \ \ \ \mbox{\hyperlink{class_pac_man_ac504d7528a9e4d72b04ce279667af9ca}{PacMan}}()\ :}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity}{Entity}}(}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cnp::k\_pacManSpawnPosition,}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cnp::k\_gridCellSize,}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ eDirection::e\_None,}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sf::Color::Yellow}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ m\_points(0),}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ m\_lives(3),}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ m\_isAlive(true),}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ m\_state(\mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5}{ePacManState}}::\mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5a485d9d4f145a5b3d039896128e60ffdf}{e\_Normal}}),}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ m\_powerUpTimer(0.f)\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pac_man_aa99ecb3b7ff401800554697e959525f7}{Update}}(\textcolor{keyword}{const}\ std::vector<std::vector<Tile>>\ \&tiles)\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_abac0cb66c435ab4e74cd5b1f785ba087}{CheckForBlockades}}(tiles);}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ Move();}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5a73e0433ad21b32161a6d783cedaf4d41}{ePacManState::e\_PowerUp}})\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ m\_powerUpTimer\ +=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(\mbox{\hyperlink{class_entity_ad17924290a1cec32e14959a8e423acc2}{m\_clock}}.getElapsedTime().asSeconds());}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_powerUpTimer\ >=\ cnp::k\_pacManPowerUpTime)\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_state\ =\ \mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5a485d9d4f145a5b3d039896128e60ffdf}{ePacManState::e\_Normal}};}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_powerUpTimer\ =\ 0.f;}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_ad17924290a1cec32e14959a8e423acc2}{m\_clock}}.restart();}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pac_man_a68daa96824a837e18205796d4d7cc58c}{Render}}(sf::RenderWindow\ \&window)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ \mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5a73e0433ad21b32161a6d783cedaf4d41}{ePacManState::e\_PowerUp}})\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Interpolate\ between\ pacman's\ colour\ and\ the\ power-\/up}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Colour\ based\ on\ the\ time}}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ normalisedTimer\ =\ m\_powerUpTimer\ /\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(cnp::k\_pacManPowerUpTime);}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ sf::Uint32\ lerpedColour\ =\ hnp::interpolate(\mbox{\hyperlink{class_entity_a66441c89aba33ce80c20b8a0485666a8}{m\_colour}}.toInteger(),\ sf::Color::White.toInteger(),}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ normalisedTimer);}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}}.setFillColor(sf::Color(lerpedColour));}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}}.setFillColor(sf::Color::Yellow);}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}}.setPosition(\textcolor{keyword}{static\_cast<}sf::Vector2f\textcolor{keyword}{>}(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}));}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ window.draw(\mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}});}
\DoxyCodeLine{00094\ \ \ \ \ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5}{ePacManState}}\ \&\mbox{\hyperlink{class_pac_man_a7576f9fcfab872360aec7fd784e62431}{GetPacManState}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_state;}
\DoxyCodeLine{00105\ \ \ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pac_man_a9fdb94a94e432662e7e7524f72be01a7}{PowerUp}}()\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ m\_state\ =\ \mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5a73e0433ad21b32161a6d783cedaf4d41}{ePacManState::e\_PowerUp}};}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ m\_powerUpTimer\ =\ 0.f;}
\DoxyCodeLine{00115\ \ \ \ \ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pac_man_a5a21a57d4a14e967fe7f6bbb09b8deaa}{AddPoints}}(\textcolor{keywordtype}{int}\ amount)\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ m\_points\ +=\ amount;}
\DoxyCodeLine{00126\ \ \ \ \ \}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_pac_man_ad463aa9f6a320a6e1ae2fe22338490b9}{GetPoints}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_points;}
\DoxyCodeLine{00137\ \ \ \ \ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_pac_man_ac641a1d58f7d6ea5c29cff15e529a7d6}{GetLivesRemaining}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_lives;}
\DoxyCodeLine{00148\ \ \ \ \ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pac_man_a07cc2ea8c31cebb35353fe7c3e44d400}{Reset}}()\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}\ =\ cnp::k\_pacManSpawnPosition;}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ m\_isAlive\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00160\ \ \ \ \ \}}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_pac_man_ac213b85e581660cd02f2b409ead1b8ac}{IsAlive}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_isAlive;}
\DoxyCodeLine{00171\ \ \ \ \ \}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pac_man_ae05f92e99edfa0c2587b110f34bf9117}{SetIsAlive}}(\textcolor{keywordtype}{bool}\ alive)\ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!alive)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ m\_lives\ -\/=\ 1;}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ m\_points\ -\/=\ 500;}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_points\ <\ 0)\ m\_points\ =\ 0;}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ m\_isAlive\ =\ alive;}
\DoxyCodeLine{00187\ \ \ \ \ \}}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordtype}{void}\ AddLives(\textcolor{keywordtype}{int}\ n)\ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ m\_lives\ +=\ n;}
\DoxyCodeLine{00190\ \ \ \ \ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordtype}{int}\ m\_points;\ }
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordtype}{int}\ m\_lives;\ }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_isAlive;\ }
\DoxyCodeLine{00196\ \ \ \ \ \mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5}{ePacManState}}\ m\_state;\ }
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordtype}{float}\ m\_powerUpTimer;\ }
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keywordtype}{void}\ Move()\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!hnp::is\_in\_vector(\mbox{\hyperlink{class_entity_a3a3241d5db2b0db20c7dc31cc667e877}{m\_limitedDirections}},\ \mbox{\hyperlink{class_entity_acf368d3ad85d1cec2fc6d139207c23cd}{m\_currentDirection}}))\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{class_entity_acf368d3ad85d1cec2fc6d139207c23cd}{m\_currentDirection}})\ \{}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Up:}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.y\ -\/=\ \mbox{\hyperlink{class_entity_aa47e538a2d1ba097823c87cc12b29c19}{m\_speed}};}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Down:}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.y\ +=\ \mbox{\hyperlink{class_entity_aa47e538a2d1ba097823c87cc12b29c19}{m\_speed}};}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Left:}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.x\ -\/=\ \mbox{\hyperlink{class_entity_aa47e538a2d1ba097823c87cc12b29c19}{m\_speed}};}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Right:}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.x\ +=\ \mbox{\hyperlink{class_entity_aa47e538a2d1ba097823c87cc12b29c19}{m\_speed}};}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_None:}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Unknown\ Movement\ direction"{}}\ <<\ std::endl;}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_a4d06551559f03e70a86c1f94677881e4}{WrapAround}}();}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_a3a3241d5db2b0db20c7dc31cc667e877}{m\_limitedDirections}}.clear();}
\DoxyCodeLine{00228\ \ \ \ \ \}}
\DoxyCodeLine{00229\ \};}

\end{DoxyCode}
