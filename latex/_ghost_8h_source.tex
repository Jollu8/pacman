\doxysection{Ghost.\+h}
\hypertarget{_ghost_8h_source}{}\label{_ghost_8h_source}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <stack>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}Entity.h"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_pacman_8h}{Pacman.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}np.h"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{enum\ class}\ eGhostType\ \{}
\DoxyCodeLine{00013\ \ \ \ \ e\_Blinky,\ }
\DoxyCodeLine{00014\ \ \ \ \ e\_Pinky,\ }
\DoxyCodeLine{00015\ \ \ \ \ e\_Inky,\ }
\DoxyCodeLine{00016\ \ \ \ \ e\_Clyde\ }
\DoxyCodeLine{00017\ \};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{enum\ class}\ eGhostState\ \{}
\DoxyCodeLine{00023\ \ \ \ \ e\_Chase,\ }
\DoxyCodeLine{00024\ \ \ \ \ e\_Scatter,\ }
\DoxyCodeLine{00025\ \ \ \ \ e\_Frightened\ }
\DoxyCodeLine{00026\ \};}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_ghost}{Ghost}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_entity}{Entity}}\ \{}
\DoxyCodeLine{00033\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_ghost_a6bf24a3cf66a0ea2e083a8aed345ec96}{Ghost}}(eGhostType\ type,\ std::vector<std::vector<Tile>>\ \&grid,\ \mbox{\hyperlink{class_pac_man}{PacMan}}\ \&pacMan)\ :}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity}{Entity}}(sf::Vector2i(),}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cnp::k\_gridCellSize,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ eDirection::e\_None,}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sf::Color::White),}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ m\_pacMan(pacMan),}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ m\_type(type),}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ m\_state(eGhostState::e\_Chase),}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ m\_homeTimer(0.f),}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ m\_updateTicks(0),}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ m\_grid(grid),}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ m\_currentCorner(0)\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Определение\ углов\ карты\ для\ патрулирования\ и\ разбегания}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (m\_type)\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eGhostType::e\_Blinky:}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_a66441c89aba33ce80c20b8a0485666a8}{m\_colour}}\ =\ sf::Color::Red;}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eGhostType::e\_Pinky:}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_a66441c89aba33ce80c20b8a0485666a8}{m\_colour}}\ =\ sf::Color::Magenta;}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eGhostType::e\_Inky:}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_a66441c89aba33ce80c20b8a0485666a8}{m\_colour}}\ =\ sf::Color::Cyan;}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eGhostType::e\_Clyde:}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_a66441c89aba33ce80c20b8a0485666a8}{m\_colour}}\ =\ sf::Color(255,\ 165,\ 0);}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:;}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}\ =\ cnp::k\_cornerPositions[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_type)];}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_ghost_a1264428b63541a7f3b6548e693491e3e}{Update}}()\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ ==\ eGhostState::e\_Frightened\ \&\&\ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}\ ==\ cnp::k\_homePositions[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_type)])\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ m\_homeTimer\ +=\ \mbox{\hyperlink{class_entity_ad17924290a1cec32e14959a8e423acc2}{m\_clock}}.getElapsedTime().asSeconds();}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_homeTimer\ >=\ cnp::k\_ghostHomeTime)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_state\ =\ eGhostState::e\_Chase;}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_homeTimer\ =\ 0.f;}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ Move();}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ CheckPacManCollisions();}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_ad17924290a1cec32e14959a8e423acc2}{m\_clock}}.restart();}
\DoxyCodeLine{00088\ \ \ \ \ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_ghost_a49f0ac9b372e5c7bb947457d12a61415}{Render}}(sf::RenderWindow\ \&window)\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ std::stack<Tile\ *>\ temp\ =\ m\_path;}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!temp.empty())\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ *node\ =\ temp.top();}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ temp.pop();}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}}.setFillColor(\{\mbox{\hyperlink{class_entity_a66441c89aba33ce80c20b8a0485666a8}{m\_colour}}.r,\ \mbox{\hyperlink{class_entity_a66441c89aba33ce80c20b8a0485666a8}{m\_colour}}.g,\ \mbox{\hyperlink{class_entity_a66441c89aba33ce80c20b8a0485666a8}{m\_colour}}.b,\ 80\});}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}}.setPosition(\textcolor{keyword}{static\_cast<}sf::Vector2f\textcolor{keyword}{>}(node-\/>m\_position));}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ window.draw(\mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}});}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ !=\ eGhostState::e\_Frightened)\ \mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}}.setFillColor(\mbox{\hyperlink{class_entity_a66441c89aba33ce80c20b8a0485666a8}{m\_colour}});}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ sf::Color\ frightenedColour\ =\ \{0,\ 19,\ 142\};}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}\ ==\ cnp::k\_homePositions[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_type)])\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Blend\ from\ blue\ to\ the\ normal\ ghost\ colour}}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ normalisedTimer\ =\ m\_homeTimer\ /\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(cnp::k\_ghostHomeTime);}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ sf::Uint32\ lerpedColour\ =\ hnp::interpolate(frightenedColour.toInteger(),\ \mbox{\hyperlink{class_entity_a66441c89aba33ce80c20b8a0485666a8}{m\_colour}}.toInteger(),}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ normalisedTimer);}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}}.setFillColor(sf::Color(lerpedColour));}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}}.setFillColor(frightenedColour);}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}}.setPosition(\textcolor{keyword}{static\_cast<}sf::Vector2f\textcolor{keyword}{>}(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}));}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ window.draw(\mbox{\hyperlink{class_entity_aad5beade91ce317b17b6d3d7f9f5b355}{m\_shape}});}
\DoxyCodeLine{00124\ \ \ \ \ \}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_ghost_a51900002936b06acc029c845d9cb9240}{Reset}}()\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ m\_state\ =\ eGhostState::e\_Chase;}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}\ =\ cnp::k\_cornerPositions[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_type)];}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Очищает\ путь,\ если\ он\ существует}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!m\_path.empty())\ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ m\_path.pop();}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00137\ \ \ \ \ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keyword}{const}\ eGhostState\ \&\mbox{\hyperlink{class_ghost_a273964aa77a35f416ec7d18189c26d15}{GetGhostState}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_state;}
\DoxyCodeLine{00145\ \ \ \ \ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_ghost_a51ccddd3e944e0802ce0ccaebe1354c1}{SetGhostState}}(eGhostState\ state)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ m\_state\ =\ state;}
\DoxyCodeLine{00153\ \ \ \ \ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00156\ \ \ \ \ \mbox{\hyperlink{class_pac_man}{PacMan}}\ \&m\_pacMan;\ }
\DoxyCodeLine{00157\ \ \ \ \ eGhostType\ m\_type;\ }
\DoxyCodeLine{00158\ \ \ \ \ eGhostState\ m\_state;\ }
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordtype}{float}\ m\_homeTimer;\ }
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{comment}{//\ Поиск\ пути\ будет\ обновляться\ каждые\ 10\ игровых\ тиков\ (раз\ в\ секунду)}}
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{keywordtype}{int}\ m\_updateTicks;}
\DoxyCodeLine{00163\ \ \ \ \ std::vector<std::vector<Tile>>\ \&m\_grid;\ }
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keywordtype}{int}\ m\_currentCorner;\ }
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ std::stack<Tile\ *>\ m\_path;\ }
\DoxyCodeLine{00167\ \ \ \ \ std::vector<Tile\ *>\ m\_openList;\ }
\DoxyCodeLine{00168\ \ \ \ \ std::vector<Tile\ *>\ m\_closedList;\ }
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_tile}{Tile}}\ *GetLowestFCostNode(std::vector<Tile\ *>\ \&list)\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!list.empty())\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_tile}{Tile}}\ *lowestFCostNode\ =\ list[0];}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&node:\ list)\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ перезаписываем\ наименьший\ узел,\ если\ стоимость\ F\ меньше}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (node-\/>m\_fCost\ <\ lowestFCostNode-\/>\mbox{\hyperlink{struct_tile_a1a2526801c46e7432523b09b038fc137}{m\_fCost}})\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lowestFCostNode\ =\ node;}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lowestFCostNode;}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00189\ \ \ \ \ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ CalculateDistanceCost(\mbox{\hyperlink{struct_tile}{Tile}}\ *a,\ \mbox{\hyperlink{struct_tile}{Tile}}\ *b)\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ deltaX\ =\ abs(a-\/>\mbox{\hyperlink{struct_tile_afd7bd5bc9a5fa6e4f7e3056f5571fc68}{m\_position}}.x\ -\/\ b-\/>\mbox{\hyperlink{struct_tile_afd7bd5bc9a5fa6e4f7e3056f5571fc68}{m\_position}}.x);}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ deltaY\ =\ abs(a-\/>\mbox{\hyperlink{struct_tile_afd7bd5bc9a5fa6e4f7e3056f5571fc68}{m\_position}}.y\ -\/\ b-\/>\mbox{\hyperlink{struct_tile_afd7bd5bc9a5fa6e4f7e3056f5571fc68}{m\_position}}.y);}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ remaining\ =\ abs(deltaX\ -\/\ deltaY);}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 15\ *\ (deltaX\ <\ deltaY\ ?\ deltaX\ :\ deltaY)\ +\ cnp::k\_gridMovementCost\ *\ remaining;}
\DoxyCodeLine{00204\ \ \ \ \ \}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordtype}{void}\ CalculatePath(\mbox{\hyperlink{struct_tile}{Tile}}\ *endNode)\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Очищаем\ стек}}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!m\_path.empty())\ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ m\_path.pop();}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ m\_path.push(endNode);}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_tile}{Tile}}\ *currentNode\ =\ endNode;}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Проходим\ через\ родительские\ узлы,\ пока\ не\ найдем\ узел\ без\ родителя}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Этот\ узел\ является\ начальным\ узлом}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (currentNode-\/>\mbox{\hyperlink{struct_tile_a8bc3dd3f6846bd57dd515f24e3531afc}{m\_cameFromNode}}\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ m\_path.push(currentNode-\/>\mbox{\hyperlink{struct_tile_a8bc3dd3f6846bd57dd515f24e3531afc}{m\_cameFromNode}});}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ currentNode\ =\ currentNode-\/>\mbox{\hyperlink{struct_tile_a8bc3dd3f6846bd57dd515f24e3531afc}{m\_cameFromNode}};}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_path.empty())\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}No\ path\ to\ X:\ "{}}\ <<\ endNode-\/>\mbox{\hyperlink{struct_tile_afd7bd5bc9a5fa6e4f7e3056f5571fc68}{m\_position}}.x}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ Y\ :\ "{}}\ <<\ endNode-\/>\mbox{\hyperlink{struct_tile_afd7bd5bc9a5fa6e4f7e3056f5571fc68}{m\_position}}.y\ <<\ \textcolor{stringliteral}{"{}\ found"{}}\ <<\ std::endl;}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00231\ \ \ \ \ \}}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00239\ \ \ \ \ std::vector<Tile\ *>\ GetNeighbourNodes(\mbox{\hyperlink{struct_tile}{Tile}}\ *currentNode)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ std::vector<Tile\ *>\ neighbours;}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ xIndex\ =\ hnp::world\_coord\_to\_array\_index(currentNode-\/>\mbox{\hyperlink{struct_tile_afd7bd5bc9a5fa6e4f7e3056f5571fc68}{m\_position}}.x);}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ yIndex\ =\ hnp::world\_coord\_to\_array\_index(currentNode-\/>\mbox{\hyperlink{struct_tile_afd7bd5bc9a5fa6e4f7e3056f5571fc68}{m\_position}}.y);}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Находим\ 4\ соседние\ позиции,\ если\ они\ допустимы}}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (xIndex\ -\/\ 1\ >=\ 0)\ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Слева}}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ neighbours.push\_back(\&m\_grid[yIndex][xIndex\ -\/\ 1]);}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (xIndex\ +\ 1\ <\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_grid[0].size()))\ \{}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Справа}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ neighbours.push\_back(\&m\_grid[yIndex][xIndex\ +\ 1]);}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Сверху}}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (yIndex\ -\/\ 1\ >=\ 0)\ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ neighbours.push\_back(\&m\_grid[yIndex\ -\/\ 1][xIndex]);}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Снизу}}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (yIndex\ +\ 1\ <\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_grid.size()))\ \{}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ neighbours.push\_back(\&m\_grid[yIndex\ +\ 1][xIndex]);}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ neighbours;}
\DoxyCodeLine{00267\ \ \ \ \ \}}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{keywordtype}{void}\ AStarPathFinding(sf::Vector2i\ startPosition,\ sf::Vector2i\ endPosition)\ \{}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Вычисляем\ индексы\ массива\ для\ начальной\ и\ конечной\ позиций}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ sf::Vector2i\ startNodeIndices(}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ startPosition.x\ /\ cnp::k\_gridCellSize,}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ startPosition.y\ /\ cnp::k\_gridCellSize}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ sf::Vector2i\ endNodeIndices(}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ endPosition.x\ /\ cnp::k\_gridCellSize,}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ endPosition.y\ /\ cnp::k\_gridCellSize}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_tile}{Tile}}\ *startNode\ =\ \&m\_grid[startNodeIndices.y][startNodeIndices.x];}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_tile}{Tile}}\ *endNode\ =\ \&m\_grid[endNodeIndices.y][endNodeIndices.x];}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ m\_openList.clear();}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ m\_closedList.clear();}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Проходим\ через\ сетку,\ устанавливаем\ стоимость\ g\ в\ бесконечность\ и\ вычисляем\ стоимость\ f}}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&tile:\ m\_grid)\ \{}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&pathNode:\ tile)\ \{}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ получаем\ ссылку\ на\ объект}}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ устанавливаем\ стоимость\ g\ в\ бесконечность}}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pathNode.\mbox{\hyperlink{struct_tile_a572c8706568e37b0e12515e4105a6fa5}{m\_gCost}}\ =\ INT\_MAX;}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ вычисляем\ стоимость\ f}}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pathNode.CalculateFCost();}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pathNode.m\_cameFromNode\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Вычисляем\ стоимости\ для\ начального\ узла}}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ startNode-\/>\mbox{\hyperlink{struct_tile_a572c8706568e37b0e12515e4105a6fa5}{m\_gCost}}\ =\ 0;}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ startNode-\/>\mbox{\hyperlink{struct_tile_a058410ac3e8f1bdf457120b4958fcd4b}{m\_hCost}}\ =\ CalculateDistanceCost(startNode,\ endNode);}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ startNode-\/>\mbox{\hyperlink{struct_tile_a393831c0e1f7441890815b522dde87bb}{CalculateFCost}}();}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ m\_openList.push\_back(startNode);}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ loops\ =\ 0;}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Проходим\ через\ все\ узлы\ и\ находим\ путь}}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!m\_openList.empty())\ \{}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ ++loops;}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Текущий\ узел\ является\ узлом\ в\ открытом\ списке\ с\ наименьшей\ стоимостью\ F}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_tile}{Tile}}\ *currentNode\ =\ GetLowestFCostNode(m\_openList);}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ m\_openList.erase(std::remove(m\_openList.begin(),\ m\_openList.end(),\ currentNode),\ m\_openList.end());}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ m\_closedList.push\_back(currentNode);}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Если\ текущий\ узел\ является\ конечным}}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (currentNode\ ==\ endNode)\ \{}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CalculatePath(endNode);}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&neighbour:\ GetNeighbourNodes(currentNode))\ \{}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Убедитесь,\ что\ текущий\ соседний\ узел\ не\ находится\ в\ закрытом\ списке}}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hnp::is\_in\_vector(m\_closedList,\ neighbour))\ \{}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Если\ сосед\ блокирует\ путь}}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (neighbour-\/>m\_type\ ==\ \mbox{\hyperlink{_tile_8h_a271bc07be325bca511bcb747e0ff2fdaa85e8d42f3c0ebedf4286bb323168f1f9}{eTileType::e\_Wall}})\ \{}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ добавляем\ в\ закрытый\ список}}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_closedList.push\_back(neighbour);}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ продолжаем\ с\ начала\ цикла\ For}}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Обновляем\ узел}}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ neighbour-\/>m\_cameFromNode\ =\ currentNode;}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ neighbour-\/>\mbox{\hyperlink{struct_tile_a572c8706568e37b0e12515e4105a6fa5}{m\_gCost}}\ =\ currentNode-\/>\mbox{\hyperlink{struct_tile_a572c8706568e37b0e12515e4105a6fa5}{m\_gCost}}\ +\ CalculateDistanceCost(currentNode,\ neighbour);}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Вычисляем\ новую\ стоимость\ H\ для\ узла}}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ neighbour-\/>m\_hCost\ =\ CalculateDistanceCost(neighbour,\ endNode);}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ neighbour.CalculateFCost();}}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ neighbour-\/>m\_fCost\ =\ neighbour-\/>m\_gCost\ +\ neighbour-\/>m\_hCost;}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ если\ открытый\ список\ не\ содержит\ соседа,\ добавляем\ его}}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hnp::is\_in\_vector(m\_openList,\ neighbour))\ \{}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ проверяем,\ является\ ли\ потенциальная\ стоимость\ меньше\ стоимости\ узла}}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (currentNode-\/>\mbox{\hyperlink{struct_tile_a572c8706568e37b0e12515e4105a6fa5}{m\_gCost}}\ >\ neighbour-\/>m\_gCost)\ \{}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_openList.push\_back(neighbour);}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00359\ \ \ \ \ \}}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00364\ \ \ \ \ \textcolor{keywordtype}{void}\ UpdatePathFinding()\ \{}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (m\_state)\ \{}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eGhostState::e\_Chase:}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ChaseModePathFinding();}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eGhostState::e\_Scatter:}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ cnp::k\_cornerPositions[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_type)]);}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eGhostState::e\_Frightened:}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ cnp::k\_homePositions[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_type)]);}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:;}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00377\ \ \ \ \ \}}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00382\ \ \ \ \ \textcolor{keywordtype}{void}\ ChaseModePathFinding()\ \{}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ pacManIndexX\ =\ hnp::world\_coord\_to\_array\_index(m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}().x);}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ pacManIndexY\ =\ hnp::world\_coord\_to\_array\_index(m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}().y);}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (m\_type)\ \{}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eGhostType::e\_Blinky:}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Если\ индексы\ X\ и\ Y\ допустимы\ в\ массиве}}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hnp::is\_in\_range(pacManIndexX,\ 0,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_grid[0].size()\ -\/\ 1))\ \&\&}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hnp::is\_in\_range(pacManIndexY,\ 0,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_grid.size()\ -\/\ 1)))\ \{}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Преследуем\ Pacman\ и\ пытаемся\ оказаться\ за\ ним}}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (m\_pacMan.\mbox{\hyperlink{class_entity_adb5b08aaa372e3a1f7aad93731cfc2af}{GetDirection}}())\ \{}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_None:}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}());}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Up:}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MoveTowardsBlockBelow(pacManIndexX,\ pacManIndexY);}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Down:}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MoveTowardsBlockAbove(pacManIndexX,\ pacManIndexY);}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Left:}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MoveTowardsBlockRight(pacManIndexX,\ pacManIndexY);}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Right:}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MoveTowardsBlockLeft(pacManIndexX,\ pacManIndexY);}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ если\ не\ допустимы,\ перемещаемся\ в\ свой\ угол}}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cnp::k\_cornerPositions[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_type)]}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eGhostType::e\_Pinky:}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hnp::is\_in\_range(pacManIndexX,\ 0,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_grid[0].size()\ -\/\ 1))\ \&\&}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hnp::is\_in\_range(pacManIndexY,\ 0,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_grid.size()\ -\/\ 1)))\ \{}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Преследуем\ Pacman\ и\ пытаемся\ оказаться\ перед\ ним}}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (m\_pacMan.\mbox{\hyperlink{class_entity_adb5b08aaa372e3a1f7aad93731cfc2af}{GetDirection}}())\ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_None:}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}());}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Up:}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MoveTowardsBlockAbove(pacManIndexX,\ pacManIndexY);}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Down:}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MoveTowardsBlockBelow(pacManIndexX,\ pacManIndexY);}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Left:}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MoveTowardsBlockLeft(pacManIndexX,\ pacManIndexY);}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eDirection::e\_Right:}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MoveTowardsBlockRight(pacManIndexX,\ pacManIndexY);}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ если\ не\ допустимы,\ перемещаемся\ в\ свой\ угол}}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cnp::k\_cornerPositions[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_type)]}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eGhostType::e\_Inky:}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Патрулируем\ область}}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_path.empty())\ \{}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_currentCorner++;}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_currentCorner\ >\ 3)\ m\_currentCorner\ =\ 0;}
\DoxyCodeLine{00453\ }
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ cnp::k\_cornerPositions[m\_currentCorner]);}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ eGhostType::e\_Clyde:}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Перемещаемся\ в\ случайную\ позицию}}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_path.empty())\ \{}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_tile}{Tile}}\ \&randomTile\ =\ m\_grid[1][1];}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ sf::Vector2i\ random(hnp::rand\_range(25,\ 750),\ hnp::rand\_range(50,\ 725));}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ randomTile\ =\ m\_grid[hnp::world\_coord\_to\_array\_index(random.y)][hnp::world\_coord\_to\_array\_index(}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ random.y)];}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (randomTile.\mbox{\hyperlink{struct_tile_adf65d98dc087bbb56bc7e98d16d562f3}{m\_type}}\ !=\ \mbox{\hyperlink{_tile_8h_a271bc07be325bca511bcb747e0ff2fdaa558dc4e29655337a3994251549d0dc5d}{eTileType::e\_Path}});}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ randomTile.\mbox{\hyperlink{struct_tile_afd7bd5bc9a5fa6e4f7e3056f5571fc68}{m\_position}});}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00469\ }
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:;}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00473\ \ \ \ \ \}}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00481\ \ \ \ \ \textcolor{keywordtype}{void}\ MoveTowardsBlockAbove(\textcolor{keywordtype}{int}\ pacManIndexX,\ \textcolor{keywordtype}{int}\ pacManIndexY)\ \{}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.y\ -\/\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}().y\ <\ 2\ *\ cnp::k\_gridCellSize\ \&\&}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.x\ ==\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}().x)\ \{}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}());}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Проверяем,\ является\ ли\ блок\ над\ PacMan\ допустимым}}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hnp::is\_in\_range(pacManIndexY\ -\/\ 1,\ 0,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_grid.size()\ -\/\ 1)))\ \{}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_grid[pacManIndexY\ -\/\ 1][pacManIndexX].m\_type\ ==\ \mbox{\hyperlink{_tile_8h_a271bc07be325bca511bcb747e0ff2fdaa558dc4e29655337a3994251549d0dc5d}{eTileType::e\_Path}})\ \{}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_grid[pacManIndexY\ -\/\ 1][pacManIndexX].\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}});}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}());}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00495\ \ \ \ \ \}}
\DoxyCodeLine{00496\ }
\DoxyCodeLine{00502\ \ \ \ \ \textcolor{keywordtype}{void}\ MoveTowardsBlockBelow(\textcolor{keywordtype}{int}\ pacManIndexX,\ \textcolor{keywordtype}{int}\ pacManIndexY)\ \{}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Если\ расстояние\ короткое,\ двигаемся\ к\ нему}}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}().y\ -\/\ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.y\ <\ 2\ *\ cnp::k\_gridCellSize\ \&\&}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.x\ ==\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}().x)\ \{}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}());}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Проверяем,\ является\ ли\ блок\ под\ PacMan\ допустимым}}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hnp::is\_in\_range(pacManIndexY\ +\ 1,\ 0,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_grid.size()\ -\/\ 1)))\ \{}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_grid[pacManIndexY\ +\ 1][pacManIndexX].m\_type\ ==\ \mbox{\hyperlink{_tile_8h_a271bc07be325bca511bcb747e0ff2fdaa558dc4e29655337a3994251549d0dc5d}{eTileType::e\_Path}})\ \{}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_grid[pacManIndexY\ +\ 1][pacManIndexX].\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}});}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}());}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00517\ \ \ \ \ \}}
\DoxyCodeLine{00518\ }
\DoxyCodeLine{00524\ \ \ \ \ \textcolor{keywordtype}{void}\ MoveTowardsBlockLeft(\textcolor{keywordtype}{int}\ pacManIndexX,\ \textcolor{keywordtype}{int}\ pacManIndexY)\ \{}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Если\ расстояние\ короткое,\ двигаемся\ к\ нему}}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.x\ -\/\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}().x\ <\ 2\ *\ cnp::k\_gridCellSize\ \&\&}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.y\ ==\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}().y)\ \{}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}());}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Проверяем,\ является\ ли\ блок\ слева\ от\ PacMan\ допустимым}}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hnp::is\_in\_range(pacManIndexX\ -\/\ 1,\ 0,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_grid.size()\ -\/\ 1)))\ \{}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_grid[pacManIndexY][pacManIndexX\ -\/\ 1].m\_type\ ==\ \mbox{\hyperlink{_tile_8h_a271bc07be325bca511bcb747e0ff2fdaa558dc4e29655337a3994251549d0dc5d}{eTileType::e\_Path}})\ \{}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_grid[pacManIndexY][pacManIndexX\ -\/\ 1].\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}});}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}());}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00539\ \ \ \ \ \}}
\DoxyCodeLine{00540\ }
\DoxyCodeLine{00541\ }
\DoxyCodeLine{00547\ \ \ \ \ \textcolor{keywordtype}{void}\ MoveTowardsBlockRight(\textcolor{keywordtype}{int}\ pacManIndexX,\ \textcolor{keywordtype}{int}\ pacManIndexY)\ \{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Если\ расстояние\ короткое,\ двигаемся\ к\ нему}}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}().x\ -\/\ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.x\ <\ 2\ *\ cnp::k\_gridCellSize\ \&\&}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}.y\ ==\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}().y)\ \{}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}());}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Проверяем,\ является\ ли\ блок\ справа\ от\ PacMan\ допустимым}}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hnp::is\_in\_range(pacManIndexX\ +\ 1,\ 0,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(m\_grid.size()\ -\/\ 1)))\ \{}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_grid[pacManIndexY][pacManIndexX\ +\ 1].m\_type\ ==\ \mbox{\hyperlink{_tile_8h_a271bc07be325bca511bcb747e0ff2fdaa558dc4e29655337a3994251549d0dc5d}{eTileType::e\_Path}})\ \{}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_grid[pacManIndexY][pacManIndexX\ +\ 1].\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}});}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AStarPathFinding(\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}},\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}());}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00562\ \ \ \ \ \}}
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00564\ }
\DoxyCodeLine{00568\ \ \ \ \ \textcolor{keywordtype}{void}\ Move()\ \{}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ m\_updateTicks++;}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_updateTicks\ ==\ 10\ ||\ m\_path.empty())\ \{}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ UpdatePathFinding();}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ m\_updateTicks\ =\ 0;}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00574\ }
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Извлекаем\ первый\ элемент\ пути}}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_path.empty())\ \{}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_tile}{Tile}}\ *destination\ =\ m\_path.top();}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \ \ \ \ m\_path.pop();}
\DoxyCodeLine{00579\ }
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}\ =\ destination-\/>\mbox{\hyperlink{struct_tile_afd7bd5bc9a5fa6e4f7e3056f5571fc68}{m\_position}};}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00582\ \ \ \ \ \}}
\DoxyCodeLine{00583\ }
\DoxyCodeLine{00587\ \ \ \ \ \textcolor{keywordtype}{void}\ CheckPacManCollisions()\ \{}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_state\ !=\ eGhostState::e\_Frightened)\ \{}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_entity_aed236e87a555c9db770fb1cbd1dc776a}{m\_position}}\ ==\ m\_pacMan.\mbox{\hyperlink{class_entity_a29a89bbdae131a7c73e5d8e53b3a3889}{GetPosition}}())\ \{}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pacMan.\mbox{\hyperlink{class_pac_man_a7576f9fcfab872360aec7fd784e62431}{GetPacManState}}()\ ==\ \mbox{\hyperlink{_pacman_8h_a803a5752413a4532fc780eb312bf2fe5a73e0433ad21b32161a6d783cedaf4d41}{ePacManState::e\_PowerUp}})\ \{}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_state\ =\ eGhostState::e\_Frightened;}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pacMan.\mbox{\hyperlink{class_pac_man_a5a21a57d4a14e967fe7f6bbb09b8deaa}{AddPoints}}(1000);}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pacMan.\mbox{\hyperlink{class_pac_man_ae05f92e99edfa0c2587b110f34bf9117}{SetIsAlive}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}I\ hit\ PacMan!"{}}\ <<\ std::endl;}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00599\ \ \ \ \ \}}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \};}

\end{DoxyCode}
